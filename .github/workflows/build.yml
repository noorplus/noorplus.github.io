name: Build & Deploy

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  build:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Check Files Exist
      run: |
        echo "Verifying project structure..."
        [ -f "index.html" ] && echo "‚úì index.html found" || exit 1
        [ -f "assets/css/style.css" ] && echo "‚úì style.css found" || exit 1
        [ -f "assets/js/app.js" ] && echo "‚úì app.js found" || exit 1
        [ -d "pages" ] && echo "‚úì pages directory found" || exit 1
    
    - name: Validate HTML
      run: |
        echo "Validating HTML..."
        grep -q "<!DOCTYPE html>" index.html && echo "‚úì Valid HTML declaration" || exit 1
        grep -q "<title>" index.html && echo "‚úì Title tag found" || exit 1
        grep -q "charset" index.html && echo "‚úì Charset defined" || exit 1
    
    - name: List Project Files
      run: |
        echo "Project structure:"
        tree -I 'node_modules|.git' -L 3 || find . -type f -not -path '.*' | head -30
    
    - name: Verify Assets
      run: |
        echo "Checking assets..."
        ls -lah assets/css/
        ls -lah assets/js/
        ls -lah pages/
    
    - name: Count Lines of Code
      run: |
        echo "Code statistics:"
        echo "HTML files:"
        wc -l $(find . -name "*.html" -type f) | tail -1
        echo "CSS files:"
        wc -l $(find assets/css -name "*.css" -type f) | tail -1
        echo "JS files:"
        wc -l $(find assets/js -name "*.js" -type f) | tail -1
    
    - name: GitHub Pages Ready
      run: |
        echo "‚úì Project ready for GitHub Pages deployment"
        echo "üìç Will be deployed to: https://noorplus.github.io/"
