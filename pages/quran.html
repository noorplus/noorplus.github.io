<section class="page quran">

  <!-- 1. Header -->
  <header class="q-header sticky-header">
    <div class="q-header-top">
      <button class="icon-btn" id="q-back-btn"><i data-lucide="chevron-left"></i></button>
      <div class="q-header-info">
        <h1 class="q-title" id="q-header-title">Al-Quran</h1>
        <small id="q-header-subtitle" class="q-subtitle">Select Surah</small>
      </div>
      <div class="q-header-actions">
        <button class="icon-btn" id="q-search-btn"><i data-lucide="search"></i></button>
        <button class="icon-btn" id="q-settings-btn"><i data-lucide="settings-2"></i></button>
      </div>
    </div>

    <!-- Search Bar (Collapsible) -->
    <div id="q-search-bar" class="q-search-bar hidden">
      <input type="text" id="q-search-input" placeholder="Search Surah (e.g. Mulk)..." autocomplete="off">
    </div>
  </header>

  <!-- 2. Main content area -->
  <div id="quran-main-view" class="q-content">

    <!-- Tabs -->
    <div class="q-tabs">
      <div class="q-tabs-track">
        <button class="q-tab active" data-tab="surah">Surah</button>
        <button class="q-tab" data-tab="juz">Juz</button>
        <button class="q-tab" data-tab="bookmarks">Bookmarks</button>
      </div>
    </div>

    <!-- Surah List Container -->
    <div id="surah-list" class="q-list">
      <!-- Populated by JS -->
      <div class="q-loading-state">
        <i data-lucide="loader-2" class="animate-spin"></i>
        <p>Loading Quran Data...</p>
      </div>
    </div>

  </div>

  <!-- 3. Ayah View (Reader) -->
  <div id="ayah-view" class="ayah-view hidden">
    <!-- Surah Header Card -->
    <div class="q-surah-card" id="q-surah-detail-card">
      <div class="q-sc-content">
        <h2 id="det-name-ar">--</h2> <!-- Arabic Name -->
        <h3 id="det-name-en">--</h3> <!-- English Name -->
        <div class="q-sc-meta">
          <span id="det-place">--</span> â€¢ <span id="det-ayahs-count">--</span> Ayahs
        </div>
      </div>
    </div>

    <!-- Ayah List -->
    <div id="ayah-list" class="ayah-list-container">
      <!-- JS populates .ayah-item -->
    </div>

    <!-- Spacer for player -->
    <div style="height: 120px;"></div>
  </div>

  <!-- 4. Mini Player (Sticky Bottom) -->
  <div id="q-mini-player" class="q-mini-player hidden">

    <!-- Progress Bar (Absolute Top) -->
    <div class="q-progress-container">
      <input type="range" id="q-mini-seek" class="q-seek-slider" value="0" min="0" max="100">
      <div class="q-progress-bar" id="q-mini-progress-bar"></div>
    </div>

    <div class="q-mp-body">
      <!-- Info -->
      <div class="q-mp-info" id="q-mp-expand-area">
        <p class="q-mp-title" id="q-mp-title">Surah Al-Fatiha</p>
        <p class="q-mp-sub" id="q-mp-reciter">Mishary Rashid</p>
      </div>

      <!-- Controls -->
      <div class="q-mp-controls">
        <button class="icon-btn-sm" id="q-mp-prev"><i data-lucide="skip-back"></i></button>
        <button class="play-btn-main" id="q-mp-play"><i data-lucide="play" fill="currentColor"></i></button>
        <button class="icon-btn-sm" id="q-mp-next"><i data-lucide="skip-forward"></i></button>
      </div>
    </div>
  </div>

  <!-- 5. Full Player Modal (Overlay) -->
  <div id="q-full-player" class="q-full-player modal-overlay" style="display: none;">
    <div class="q-fp-content">

      <!-- Header -->
      <div class="q-fp-header">
        <button class="icon-btn" id="q-fp-close"><i data-lucide="chevron-down"></i></button>
        <span>Now Playing</span>
        <button class="icon-btn" id="q-fp-options"><i data-lucide="more-horizontal"></i></button>
      </div>

      <!-- Artwork (Dynamic Gradients?) -->
      <div class="q-fp-art">
        <div class="q-fp-art-circle">
          <span id="q-fp-surah-num">1</span>
        </div>
        <h2 id="q-fp-title-ar" class="q-fp-title-ar">--</h2>
      </div>

      <!-- Meta -->
      <div class="q-fp-meta">
        <h3 id="q-fp-title">Surah Al-Fatiha</h3>
        <p id="q-fp-reciter-name">Mishary Rashid Alafasy</p>
      </div>

      <!-- Seeker -->
      <div class="q-fp-seeker">
        <input type="range" id="q-fp-seek" value="0" min="0" max="100">
        <div class="q-fp-times">
          <span id="q-fp-current">0:00</span>
          <span id="q-fp-duration">0:00</span>
        </div>
      </div>

      <!-- Main Controls -->
      <div class="q-fp-controls">
        <button class="icon-btn" id="q-fp-loop" title="Loop"><i data-lucide="repeat"></i></button>
        <button class="icon-btn-lg" id="q-fp-prev"><i data-lucide="skip-back"></i></button>
        <button class="play-btn-c" id="q-fp-play"><i data-lucide="play" fill="currentColor"></i></button>
        <button class="icon-btn-lg" id="q-fp-next"><i data-lucide="skip-forward"></i></button>
        <button class="icon-btn" id="q-fp-speed" title="Speed">1x</button>
      </div>

      <!-- Bottom Actions -->
      <div class="q-fp-actions">
        <button class="icon-btn" id="q-fp-playlist"><i data-lucide="list-music"></i></button>
        <button class="icon-btn" id="q-fp-bookmark"><i data-lucide="bookmark"></i></button>
      </div>
    </div>
  </div>

  <!-- 6. Settings Modal -->
  <div id="q-settings-modal" class="modal-overlay" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Quran Settings</h3>
        <button id="q-settings-close" class="icon-btn"><i data-lucide="x"></i></button>
      </div>
      <div class="modal-body">
        <!-- Reciter -->
        <div class="setting-item">
          <label>Reciter</label>
          <select id="q-setting-reciter" class="onb-select">
            <option value="ar.alafasy">Mishary Rashid Alafasy</option>
            <option value="ar.abdulbasitmurattal">Abdul Basit (Murattal)</option>
            <option value="ar.sudais">Abdurrahmaan As-Sudais</option>
            <option value="ar.hudhaify">Ali Al-Hudhaify</option>
            <option value="ar.husary">Mahmoud Khalil Al-Husary</option>
          </select>
        </div>

        <!-- Translation -->
        <div class="setting-item">
          <label>Translation</label>
          <select id="q-setting-translation" class="onb-select">
            <option value="en.sahih">English (Sahih International)</option>
            <option value="en.asar">English (Clear Quran)</option>
            <option value="ur.jalandhry">Urdu (Jalandhry)</option>
            <option value="bn.bengali">Bengali (Muhiuddin Khan)</option>
            <option value="none">None (Arabic Only)</option>
          </select>
        </div>

        <!-- Font Size -->
        <div class="setting-item">
          <label>Arabic Size</label>
          <div class="range-wrapper">
            <small>A</small>
            <input type="range" id="q-setting-font" min="18" max="48" step="2" value="26">
            <big>A</big>
          </div>
        </div>

      </div>
      <div class="modal-footer">
        <button class="primary-btn" id="q-settings-save">Save</button>
      </div>
    </div>
  </div>

  <style>
    /* Inline Critical Styles for Layout to prevent Flash */
    .sticky-header {
      position: sticky;
      top: 0;
      z-index: 50;
      background: var(--bg);
      border-bottom: 1px solid var(--divider);
    }

    .hidden {
      display: none !important;
    }
  </style>

</section>