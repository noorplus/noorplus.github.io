<section class="page menu">

  <header class="page-header">
    <h1 class="page-title">Menu</h1>
    <p class="page-subtitle">Personalize your experience</p>
  </header>

  <!-- Section: General -->
  <h3 class="menu-section-header">General</h3>
  <div class="menu-list">
    <!-- Theme Toggle -->
    <div class="menu-item" id="theme-toggle">
      <div class="menu-item-left">
        <i data-lucide="moon" class="menu-icon"></i>
        <div class="menu-info">
          <span class="menu-label">Dark Mode</span>
          <p class="menu-description">Adjust for better night viewing</p>
        </div>
      </div>
      <div class="toggle-switch"></div>
    </div>
  </div>

  <!-- Section: Worship -->
  <h3 class="menu-section-header">Worship</h3>
  <div class="menu-list">
    <!-- Prayer Settings -->
    <button class="menu-item" id="prayer-settings-btn"
      style="background: none; border: none; cursor: pointer; width: 100%; text-align: left;">
      <div class="menu-item-left">
        <i data-lucide="settings" class="menu-icon"></i>
        <div class="menu-info">
          <span class="menu-label">Prayer Settings</span>
          <p class="menu-description" id="menu-prayer-settings-desc">Location • Calculation</p>
        </div>
      </div>
      <i data-lucide="chevron-right" class="menu-icon"></i>
    </button>

    <!-- Notifications -->
    <button class="menu-item" id="notifications-btn"
      style="background: none; border: none; cursor: pointer; width: 100%; text-align: left;">
      <div class="menu-item-left">
        <i data-lucide="bell" class="menu-icon"></i>
        <div class="menu-info">
          <span class="menu-label">Notifications</span>
          <p class="menu-description">Adhan alerts & reminders</p>
        </div>
      </div>
      <i data-lucide="chevron-right" class="menu-icon"></i>
    </button>
  </div>

  <!-- Section: System -->
  <h3 class="menu-section-header">System</h3>
  <div class="menu-list">
    <!-- Clear Cache -->
    <button class="menu-item" id="clear-cache-btn"
      style="background: none; border: none; cursor: pointer; width: 100%; text-align: left;">
      <div class="menu-item-left">
        <i data-lucide="trash-2" class="menu-icon"></i>
        <div class="menu-info">
          <span class="menu-label">Clear Cache</span>
          <p class="menu-description">Remove stored data</p>
        </div>
      </div>
      <i data-lucide="chevron-right" class="menu-icon"></i>
    </button>
  </div>

  <!-- Footer -->
  <div class="menu-footer">
    <p>NoorPlus v1.2.0 • Build 2026</p>
  </div>

  <!-- Prayer Settings Modal -->
  <div id="prayer-settings-modal" class="modal-overlay" style="display: none;">
    <div class="modal-content">

      <!-- Close Button (Absolute) -->
      <button id="close-settings-modal"
        style="position: absolute; top: 20px; right: 20px; background: none; border: none; cursor: pointer; color: var(--text-secondary); z-index: 10;">
        <i data-lucide="x"></i>
      </button>

      <!-- Step 1: Location & Calculation -->
      <div id="wizard-step-1" class="concept-step active" style="padding: 32px 24px;">

        <!-- Illustration -->
        <div class="concept-illustration">
          <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1"
            stroke-linecap="round" stroke-linejoin="round" style="color: var(--primary);">
            <!-- Map / Globe Icon -->
            <circle cx="12" cy="12" r="10"></circle>
            <path d="M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"></path>
            <path d="M2 12h20"></path>
          </svg>
        </div>

        <h2 class="concept-title">Your Location</h2>
        <div style="font-size: 13px; color: var(--text-secondary); margin-bottom: 24px;">
          <span id="wizard-location-text">Detected Location</span><br>
          <span style="font-size: 11px; opacity: 0.7;">Time Zone: <span id="wizard-timezone">...</span></span>
        </div>

        <h3 style="font-size: 16px; font-weight: 600; margin-bottom: 12px; width: 100%; text-align: left;">Prayer Time
          Calculation</h3>
        <p style="font-size: 12px; color: var(--text-secondary); text-align: left; margin-bottom: 16px; width: 100%;">
          Select your preferred calculation method or let the app find it for accurate prayer times in your area.
        </p>

        <!-- Method Card -->
        <div class="input-card" style="position: relative;">
          <div>
            <span class="input-card-label">Calculation Method</span>
            <span class="input-card-value" id="disp-calc-method">Karachi</span>
          </div>
          <i data-lucide="chevron-down" style="width: 16px; opacity: 0.5;"></i>
          <!-- Hidden Select Overlay -->
          <select id="settings-calculation-method" class="onb-select"
            style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; cursor: pointer;">
            <option value="Karachi">Karachi (Shafi)</option>
            <option value="ISNA">ISNA (North American)</option>
            <option value="MWL">Muslim World League</option>
            <option value="Makkah">Umm Al-Qura (Makkah)</option>
            <option value="Egypt">Egyptian Authority</option>
            <option value="Tehran">Tehran (Jafari)</option>
            <option value="Dubai">Dubai (Gulf)</option>
            <option value="Kuwait">Kuwait</option>
            <option value="Qatar">Qatar</option>
            <option value="Singapore">Singapore</option>
            <option value="Turkey">Turkey</option>
          </select>
        </div>

        <!-- Asr Card -->
        <div class="input-card" style="position: relative;">
          <div>
            <span class="input-card-label">Asr Calculation</span>
            <span class="input-card-value" id="disp-asr-method">Standard (Shafi)</span>
          </div>
          <i data-lucide="chevron-down" style="width: 16px; opacity: 0.5;"></i>
          <!-- Hidden Select/Radio Overlay Hack for standard select behavior -->
          <select id="settings-asr-method-select" class="onb-select"
            style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; cursor: pointer;">
            <option value="Shafi">Standard (Shafi)</option>
            <option value="Hanafi">Hanafi</option>
          </select>
        </div>
        <!-- High Lat Hidden for simpler UI or add as advanced? Keeping strict to concept -> strict concept doesn't show it. I will hide it or put it in Step 2. Let's put it in Step 2 or keep hidden for now. User said "get data like these images". I'll skip it in UI but keep logic safe. -->

        <p style="font-size: 11px; color: var(--success); margin-top: 12px;">
          The calculation method is set automatically; you can change it if needed.
        </p>

        <!-- Footer -->
        <div class="wizard-footer">
          <!-- See Country List (Secondary) -->
          <button class="wizard-btn-text" style="margin-bottom: 16px; font-size: 13px; padding: 10px;">See Country &
            Method List</button>

          <!-- Next Button -->
          <button id="wizard-next-btn" class="wizard-btn">
            <i data-lucide="chevron-right"></i>
          </button>
        </div>
      </div>

      <!-- Step 2: Hijri Adjustment -->
      <div id="wizard-step-2" class="concept-step" style="padding: 32px 24px;">

        <!-- Illustration -->
        <div class="concept-illustration" style="background: #2D3142;">
          <!-- Planet SVG -->
          <svg width="60" height="60" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="1.5">
            <circle cx="12" cy="12" r="6" fill="#F4B400" stroke="none"></circle> <!-- Sun -->
            <circle cx="4" cy="18" r="2" fill="#4285F4" stroke="none"></circle> <!-- Earth -->
            <path d="M12 2a10 10 0 0 1 10 10" stroke="#fff" stroke-dasharray="4 4"></path>
          </svg>
        </div>

        <h2 class="concept-title">Adjust Hijri Date</h2>
        <p class="concept-desc">
          Some countries are 1 day behind from Saudi Arabia in terms of moon sighting. You may adjust Hijri date by your
          location.
        </p>

        <!-- Pill Selector -->
        <!-- Replaces number input -->
        <input type="hidden" id="settings-hijri-adj" value="0">
        <div class="pill-container">
          <button class="pill-btn" data-val="-2">-2</button>
          <button class="pill-btn" data-val="-1">-1</button>
          <button class="pill-btn active" data-val="0">0</button>
          <button class="pill-btn" data-val="1">+1</button>
          <button class="pill-btn" data-val="2">+2</button>
        </div>

        <p id="hijri-desc-text" style="font-size: 13px; color: var(--text-primary); font-weight: 500;">
          Same day as Saudi Arabia
        </p>

        <!-- Footer -->
        <div class="wizard-footer">
          <button id="wizard-save-btn" class="wizard-btn">
            <i data-lucide="check"></i>
          </button>
        </div>

        <!-- Back Button (Small) -->
        <button id="wizard-back-btn"
          style="background:none; border:none; color: var(--text-secondary); margin-top: 16px; cursor: pointer; font-size: 12px;">
          Back to Location
        </button>
      </div>

    </div>
    <!-- Notification Settings Modal -->
    <div id="notification-settings-modal" class="modal-overlay" style="display: none;">
      <div class="modal-content">

        <!-- Modal Header -->
        <div
          style="padding: 20px; border-bottom: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center;">
          <h2 style="margin: 0; font-size: 20px; font-weight: 700;">Adhan & Alerts</h2>
          <button id="close-notif-modal"
            style="background: none; border: none; cursor: pointer; padding: 4px; color: var(--text-secondary);">
            <i data-lucide="x"></i>
          </button>
        </div>

        <!-- Modal Body -->
        <div style="padding: 24px;">

          <!-- Master Toggle -->
          <div
            style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; padding-bottom: 24px; border-bottom: 1px solid var(--border-color);">
            <div>
              <span style="font-weight: 600; font-size: 16px; display: block;">Enable Notifications</span>
              <small style="color: var(--text-muted);">Play Adhan when time arrives</small>
            </div>
            <label class="toggle-switch-label"
              style="position: relative; display: inline-block; width: 44px; height: 24px;">
              <!-- Using the same structure as theme toggle -->
              <input type="checkbox" id="notif-master-toggle" style="opacity: 0; width: 0; height: 0;">
              <span class="custom-toggle"
                style="position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: var(--divider); transition: .4s; border-radius: 34px;"></span>
              <span class="toggle-knob"
                style="position: absolute; content: ''; height: 20px; width: 20px; left: 2px; bottom: 2px; background-color: white; transition: .4s; border-radius: 50%; box-shadow: 0 2px 4px rgba(0,0,0,0.2);"></span>
            </label>
          </div>

          <!-- Individual Prayers -->
          <h3 style="font-size: 13px; text-transform: uppercase; color: var(--text-secondary); margin-bottom: 16px;">
            Customize Prayers</h3>
          <div class="notif-list" style="display: flex; flex-direction: column; gap: 12px;">
            <!-- Fajr -->
            <label
              style="display: flex; justify-content: space-between; padding: 12px; background: var(--surface); border-radius: 12px; cursor: pointer;">
              <span>Fajr</span>
              <input type="checkbox" data-prayer="Fajr" class="notif-checkbox">
            </label>
            <!-- Dhuhr -->
            <label
              style="display: flex; justify-content: space-between; padding: 12px; background: var(--surface); border-radius: 12px; cursor: pointer;">
              <span>Dhuhr</span>
              <input type="checkbox" data-prayer="Dhuhr" class="notif-checkbox">
            </label>
            <!-- Asr -->
            <label
              style="display: flex; justify-content: space-between; padding: 12px; background: var(--surface); border-radius: 12px; cursor: pointer;">
              <span>Asr</span>
              <input type="checkbox" data-prayer="Asr" class="notif-checkbox">
            </label>
            <!-- Maghrib -->
            <label
              style="display: flex; justify-content: space-between; padding: 12px; background: var(--surface); border-radius: 12px; cursor: pointer;">
              <span>Maghrib</span>
              <input type="checkbox" data-prayer="Maghrib" class="notif-checkbox">
            </label>
            <!-- Isha -->
            <label
              style="display: flex; justify-content: space-between; padding: 12px; background: var(--surface); border-radius: 12px; cursor: pointer;">
              <span>Isha</span>
              <input type="checkbox" data-prayer="Isha" class="notif-checkbox">
            </label>
          </div>

        </div>

        <!-- Footer -->
        <div style="padding: 20px; border-top: 1px solid var(--border-color);">
          <button id="save-notif-settings"
            style="width: 100%; padding: 14px; background: var(--accent); color: white; border: none; border-radius: 12px; font-size: 16px; font-weight: 600; cursor: pointer;">
            Save Preferences
          </button>
        </div>

      </div>
    </div>

    <style>
      /* Toggle Styles for Modal */
      #notif-master-toggle:checked+.custom-toggle {
        background-color: var(--success);
      }

      #notif-master-toggle:checked+.custom-toggle .toggle-knob {
        transform: translateX(20px);
      }

      .notif-checkbox {
        width: 20px;
        height: 20px;
        accent-color: var(--primary);
      }
    </style>